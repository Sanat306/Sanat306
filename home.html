<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Map</title>
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
    <div class="map-container">
        <div id="map"></div>
    </div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>



function initMap() {
    navigator.geolocation.getCurrentPosition(function(position) {
        var userLocation = [position.coords.latitude, position.coords.longitude];

        var map = L.map('map').setView(userLocation, 15);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        fetch('https://nominatim.openstreetmap.org/reverse?lat='+ userLocation[0]+'&lon='+ userLocation[1]+ '&format=json')
        .then(function(responce){
            return responce.json();


        })
        .then(function(data){
            var address = data.display_name || "Address not Found";
            L.marker(userLocation).addTo(map)
            .bindPopup('You Are Here:' + address)
            .openPopup();

            speakAddress(address);
    });

});

}

function speakAddress(address){
    if ('speechSynthesis' in window){
        var speech = new speechSynthesisUtterance(address);
        speech.lang = 'en-US';
        window.speechSynthesis.speak(speech);
    } else {
        console.log("Speech synthesis not supported in this browser.")
    }

}

document.addEventListener('DOMContentLoaded', initMap);

    </script>
</body>
</html>
